# 🚀 项目部署指南

## 部署架构

```
前端 (GitHub Pages) → 后端API (Railway)
https://yourname.github.io/fun → https://your-app.railway.app
```

## 方案一：Railway 部署（推荐）

### 1. 后端部署到 Railway

1. **注册 Railway 账号**
   - 访问 [railway.app](https://railway.app)
   - 使用 GitHub 账号登录

2. **创建新项目**
   - 点击 "New Project"
   - 选择 "Deploy from GitHub repo"
   - 选择您的仓库

3. **配置部署**
   - Railway 会自动检测到 Python 项目
   - 使用提供的 `railway.json` 配置
   - 设置环境变量（如需要）

4. **获取部署URL**
   - 部署完成后会获得类似 `https://your-app.railway.app` 的URL

### 2. 前端部署到 GitHub Pages

1. **创建 GitHub 仓库**
   - 在 GitHub 创建新仓库
   - 上传项目文件

2. **启用 GitHub Pages**
   - 进入仓库 Settings
   - 找到 Pages 选项
   - 选择 Source: Deploy from a branch
   - 选择 main 分支

3. **修改前端API地址**
   - 在 `index.html` 中修改API请求地址
   - 将 `http://localhost:8000` 改为您的 Railway URL

## 方案二：Render 部署

### 1. 后端部署到 Render

1. **注册 Render 账号**
   - 访问 [render.com](https://render.com)
   - 使用 GitHub 账号登录

2. **创建 Web Service**
   - 选择 "New" → "Web Service"
   - 连接 GitHub 仓库
   - 配置：
     - Build Command: `pip install -r requirements.txt`
     - Start Command: `python3 server.py`

### 2. 前端部署到 Render

1. **创建 Static Site**
   - 选择 "New" → "Static Site"
   - 连接 GitHub 仓库
   - 设置 Build Command: `echo "Static site"`
   - 设置 Publish Directory: `/`

## 环境变量配置

如果需要配置环境变量，在部署平台中设置：

```bash
PORT=8000
PYTHON_VERSION=3.11
```

## 文件说明

- `requirements.txt`: Python 依赖包列表
- `Procfile`: Heroku 部署配置
- `railway.json`: Railway 部署配置
- `server.py`: Python 后端服务器
- `index.html`: 前端页面
- `cities_data.json`: 城市数据

## 注意事项

1. **CORS 问题**: 如果遇到跨域问题，需要在后端添加 CORS 头
2. **端口配置**: 部署平台会自动分配端口，使用 `os.environ.get('PORT', 8000)`
3. **静态文件**: 确保所有静态文件都包含在部署中

## 测试部署

部署完成后，访问：
- 前端: `https://yourname.github.io/fun`
- 后端API: `https://your-app.railway.app/api/cities`

## 故障排除

1. **部署失败**: 检查 `requirements.txt` 和启动命令
2. **API 无法访问**: 检查 CORS 配置和端口设置
3. **静态文件404**: 确保文件路径正确
